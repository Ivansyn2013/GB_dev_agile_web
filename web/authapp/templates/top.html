{% extends 'base.html' %}
{% load static %}

{% block style %}
    <link rel="stylesheet" type="text/css" href="{% static 'style_profile.css' %}">
{% endblock %}

{% block content %}
<div class="profile_container">
    <h1> TOP 10</h1>

    <div class="data_profile_container">
        <table>
            <tr><th>Аватар</th></th><th>Имя пользователя </th><th>Результат </th><th>Kerby(best) </th><th>Bomberman`</th><th>Super Mario(best) </th><th>Duck Hunt(best) </th><th>Количество игр </th> <th>Количество постов </th></tr> <!--ряд с ячейками заголовков-->
                {% for t in top %}
                    <tr>
                        <td class="avatar_table">
                            {% if t.user_name.avatar %}
                                <img src="{{ t.user_name.avatar.url }}" alt="ava">
                            {% else %}
                                <img src="media/not_avatar.jpg" alt="ava">
                            {% endif %}
                        </td>
                        <td>
                            <a href="{% url 'detail_profile_user' pk=t.user_name.id %}">{{t.user_name.username}}</a>
                        </td>

                        {% with kerby_best_result=t.kerby.best_result|default:0 %}
                        {% with super_mario_best_result=t.super_mario.best_result|default:0 %}
                        {% with duck_hunt_best_result=t.duck_hunt.best_result|default:0 %}
                        {% with bomberman_kill_npc_best=t.bomberman.kill_npc_best|default:0 %}

                        {% with total_result=kerby_best_result|add:super_mario_best_result|add:duck_hunt_best_result|add:bomberman_kill_npc_best %}
                        <td>{{ total_result }}</td>
                        {% endwith %}
                        {% endwith %}
                        {% endwith %}
                        {% endwith %}
                        {% endwith %}

                        {% if t.kerby %}<td>{{ t.kerby.best_result }}</td>{% else %}<td>0</td>{% endif %}
                        {% if t.kerby %}<td>{{ t.bomberman.kill_npc_best }}</td>{% else %}<td>0</td>{% endif %}
                        {% if t.super_mario %}<td>{{ t.super_mario.best_result }}</td>{% else %}<td>0</td>{% endif %}
                        {% if t.duck_hunt %}<td>{{ t.duck_hunt.best_result }}</td>{% else %}<td>0</td>{% endif %}
                        <td>{{t.count_game}}</td>
                        <td>{{t.post_count}}</td>
                    </tr> <!--ряд с ячейками тела таблицы-->
                {% endfor %}
        </table>
    </div>

</div>


{% endblock %}